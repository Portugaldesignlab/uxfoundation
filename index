<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Foundation Design Lab</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=DM+Mono:wght@300;400;500&display=swap" rel="stylesheet" />
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  html { scroll-behavior: smooth; }
  body { background: #080808; color: #F0EDE8; font-family: 'Cormorant Garamond', serif; min-height: 100vh; overflow-x: hidden; }
  ::-webkit-scrollbar { width: 4px; }
  ::-webkit-scrollbar-track { background: #111; }
  ::-webkit-scrollbar-thumb { background: #E8FF00; }

  #bg-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; }
  #corner-left { position: fixed; top: 24px; left: 24px; z-index: 10; font-family: 'DM Mono', monospace; font-size: 10px; letter-spacing: 0.2em; color: rgba(232,255,0,0.5); text-transform: uppercase; }
  #corner-right { position: fixed; top: 24px; right: 24px; z-index: 10; font-family: 'DM Mono', monospace; font-size: 10px; letter-spacing: 0.2em; color: rgba(240,237,232,0.3); text-transform: uppercase; }
  #app { position: relative; z-index: 1; min-height: 100vh; }

  /* ── BUTTONS ── */
  .btn-primary { background: #E8FF00; color: #080808; border: none; padding: 14px 36px; font-family: 'DM Mono', monospace; font-size: 13px; letter-spacing: 0.15em; text-transform: uppercase; cursor: pointer; transition: all 0.2s; }
  .btn-primary:hover { background: #fff; transform: translateY(-2px); box-shadow: 0 8px 32px rgba(232,255,0,0.3); }
  .btn-ghost { background: transparent; color: #E8FF00; border: 1px solid rgba(232,255,0,0.4); padding: 12px 28px; font-family: 'DM Mono', monospace; font-size: 12px; letter-spacing: 0.12em; text-transform: uppercase; cursor: pointer; transition: all 0.2s; }
  .btn-ghost:hover { border-color: #E8FF00; background: rgba(232,255,0,0.07); }

  /* ── INPUTS ── */
  .input-field { background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.1); color: #F0EDE8; padding: 14px 18px; font-family: 'DM Mono', monospace; font-size: 13px; width: 100%; outline: none; transition: border 0.2s; }
  .input-field:focus { border-color: #E8FF00; }
  .input-field::placeholder { color: rgba(240,237,232,0.3); }
  label.field-label { display: block; font-family: 'DM Mono', monospace; font-size: 11px; letter-spacing: 0.15em; color: rgba(240,237,232,0.5); text-transform: uppercase; margin-bottom: 8px; }

  /* ── TRACK CARDS ── */
  .track-card { border: 1px solid rgba(255,255,255,0.08); padding: 18px 22px; cursor: pointer; transition: all 0.2s; position: relative; background: transparent; color: #F0EDE8; text-align: left; width: 100%; }
  .track-card:hover { border-color: rgba(232,255,0,0.5); background: rgba(232,255,0,0.04); }
  .track-card.selected { border-color: #E8FF00; background: rgba(232,255,0,0.08); }
  .track-num { font-family: 'DM Mono', monospace; font-size: 10px; color: rgba(232,255,0,0.5); letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 4px; }
  .track-name { font-size: 15px; font-weight: 500; letter-spacing: -0.01em; font-family: 'Cormorant Garamond', serif; }
  .track-dot { position: absolute; top: 10px; right: 10px; width: 8px; height: 8px; background: #E8FF00; border-radius: 50%; display: none; }
  .track-card.selected .track-dot { display: block; }

  /* ── DISCIPLINE CARDS ── */
  .disc-card { border: 1px solid rgba(255,255,255,0.07); padding: 20px; transition: all 0.2s; }
  .disc-card:hover { border-color: rgba(232,255,0,0.3); }
  .disc-num { font-family: 'DM Mono', monospace; font-size: 9px; letter-spacing: 0.2em; color: rgba(232,255,0,0.5); text-transform: uppercase; margin-bottom: 8px; }
  .disc-title { font-size: 18px; font-weight: 500; margin-bottom: 8px; letter-spacing: -0.01em; }
  .disc-desc { font-family: 'DM Mono', monospace; font-size: 11px; color: rgba(240,237,232,0.4); line-height: 1.6; margin-bottom: 16px; }
  .disc-rate-label { font-family: 'DM Mono', monospace; font-size: 10px; color: rgba(240,237,232,0.35); letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 8px; }
  .rating-row { display: flex; gap: 4px; }
  .rating-btn { width: 36px; height: 36px; border: 1px solid rgba(255,255,255,0.15); background: transparent; color: #F0EDE8; font-family: 'DM Mono', monospace; font-size: 11px; cursor: pointer; transition: all 0.15s; display: flex; align-items: center; justify-content: center; }
  .rating-btn:hover, .rating-btn.active { background: #E8FF00; color: #080808; border-color: #E8FF00; }
  .rating-label { font-family: 'DM Mono', monospace; font-size: 10px; color: #E8FF00; margin-top: 6px; min-height: 16px; }

  /* ── ASSESSMENT ── */
  .q-block { margin-bottom: 40px; padding-bottom: 40px; border-bottom: 1px solid rgba(255,255,255,0.06); }
  .q-num { font-family: 'DM Mono', monospace; font-size: 10px; color: rgba(232,255,0,0.5); letter-spacing: 0.2em; text-transform: uppercase; margin-bottom: 8px; }
  .q-text { font-size: 22px; font-weight: 400; margin-bottom: 20px; line-height: 1.4; letter-spacing: -0.01em; }
  .q-option { border: 1px solid rgba(255,255,255,0.1); padding: 14px 20px; cursor: pointer; font-family: 'DM Mono', monospace; font-size: 12px; letter-spacing: 0.05em; transition: all 0.2s; margin-bottom: 8px; display: flex; align-items: center; gap: 12px; background: transparent; color: #F0EDE8; width: 100%; text-align: left; }
  .q-option:hover { border-color: rgba(232,255,0,0.4); background: rgba(232,255,0,0.03); }
  .q-option.selected { border-color: #E8FF00; background: rgba(232,255,0,0.07); }
  .q-opt-icon { width: 22px; height: 22px; border: 1px solid rgba(255,255,255,0.2); background: transparent; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-size: 10px; color: rgba(255,255,255,0.3); transition: all 0.2s; }
  .q-option.selected .q-opt-icon { background: #E8FF00; border-color: #E8FF00; color: #080808; }

  /* ── TAGS ── */
  .tag { display: inline-block; border: 1px solid rgba(232,255,0,0.4); color: #E8FF00; padding: 4px 12px; font-family: 'DM Mono', monospace; font-size: 11px; letter-spacing: 0.1em; margin: 4px; }
  .tag-growth { display: inline-block; border: 1px solid rgba(255,100,60,0.3); color: rgba(255,160,120,0.8); padding: 4px 12px; font-family: 'DM Mono', monospace; font-size: 11px; margin: 4px; }

  /* ── PROGRESS STEPPER ── */
  #stepper { position: fixed; top: 0; left: 0; right: 0; z-index: 20; background: rgba(8,8,8,0.95); border-bottom: 1px solid rgba(255,255,255,0.07); padding: 20px 40px; display: none; }
  .stepper-inner { max-width: 900px; margin: 0 auto; display: flex; align-items: center; }
  .step-item { display: flex; align-items: center; flex-shrink: 0; gap: 8px; }
  .step-num { width: 24px; height: 24px; border: 1px solid rgba(255,255,255,0.2); display: flex; align-items: center; justify-content: center; font-family: 'DM Mono', monospace; font-size: 10px; color: rgba(255,255,255,0.3); transition: all 0.4s; flex-shrink: 0; }
  .step-num.active { border-color: #E8FF00; color: #E8FF00; }
  .step-num.done { border-color: #E8FF00; background: #E8FF00; color: #080808; }
  .step-label { font-family: 'DM Mono', monospace; font-size: 10px; letter-spacing: 0.1em; text-transform: uppercase; color: rgba(240,237,232,0.25); transition: color 0.4s; }
  .step-label.active, .step-label.done { color: rgba(240,237,232,0.7); }
  .step-line { flex: 1; height: 1px; background: rgba(255,255,255,0.1); margin: 0 16px; position: relative; overflow: hidden; }
  .step-line-fill { position: absolute; left: 0; top: 0; height: 100%; width: 0%; background: #E8FF00; transition: width 0.6s ease; }

  /* ── ANIMATIONS ── */
  .fade-in { animation: fadeInUp 0.6s ease both; }
  @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
  .d1 { animation-delay: 0.1s; } .d2 { animation-delay: 0.2s; } .d3 { animation-delay: 0.3s; } .d4 { animation-delay: 0.4s; } .d5 { animation-delay: 0.5s; }
  @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.3} }
  .pulse-dot { animation: pulse 2s infinite; }

  /* ── SCREENS ── */
  .screen { display: none; min-height: 100vh; }
  .screen.active { display: block; }

  /* ── LAYOUTS ── */
  .center-layout { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; padding: 60px 24px; }
  .content-layout { padding: 100px 24px 60px; }
  .max-w-680 { max-width: 680px; margin: 0 auto; }
  .max-w-720 { max-width: 720px; margin: 0 auto; }
  .max-w-860 { max-width: 860px; margin: 0 auto; }
  .max-w-900 { max-width: 900px; margin: 0 auto; }

  /* ── GRID ── */
  .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
  .grid-tracks { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px; }
  .grid-discs { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 16px; }

  /* ── BAR CHART ── */
  .readiness-row { display: flex; align-items: center; gap: 12px; margin-bottom: 10px; }
  .readiness-label { font-family: 'DM Mono', monospace; font-size: 10px; color: rgba(240,237,232,0.4); width: 180px; flex-shrink: 0; letter-spacing: 0.02em; }
  .readiness-track { flex: 1; height: 4px; background: rgba(255,255,255,0.06); position: relative; }
  .readiness-fill { position: absolute; left: 0; top: 0; height: 100%; width: 0%; transition: width 1s ease; }
  .readiness-val { font-family: 'DM Mono', monospace; font-size: 10px; color: rgba(232,255,0,0.6); width: 14px; }

  /* ── LANG CARDS ── */
  .lang-card { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); padding: 28px 32px; cursor: pointer; text-align: left; color: #F0EDE8; transition: all 0.3s; display: flex; align-items: center; justify-content: space-between; width: 100%; font-family: 'Cormorant Garamond', serif; }
  .lang-card:hover { border-color: #E8FF00; background: rgba(232,255,0,0.06); }
  .lang-arrow { width: 40px; height: 40px; border: 1px solid rgba(232,255,0,0.3); display: flex; align-items: center; justify-content: center; color: #E8FF00; font-size: 18px; flex-shrink: 0; }

  /* ── INSIGHTS ── */
  .archetype-card { border: 1px solid #E8FF00; padding: 40px; margin-bottom: 32px; position: relative; background: rgba(232,255,0,0.03); }
  .archetype-badge { position: absolute; top: -1px; left: 40px; background: #E8FF00; padding: 4px 16px; font-family: 'DM Mono', monospace; font-size: 10px; letter-spacing: 0.2em; text-transform: uppercase; color: #080808; }
  .section-card { border: 1px solid rgba(255,255,255,0.08); padding: 28px; }
  .section-title-yellow { font-family: 'DM Mono', monospace; font-size: 10px; letter-spacing: 0.2em; color: #E8FF00; text-transform: uppercase; margin-bottom: 16px; }
  .section-title-red { font-family: 'DM Mono', monospace; font-size: 10px; letter-spacing: 0.2em; color: rgba(255,100,60,0.8); text-transform: uppercase; margin-bottom: 16px; }

  @media (max-width: 600px) {
    .grid-2 { grid-template-columns: 1fr; }
    .step-label { display: none; }
    #stepper { padding: 16px 20px; }
    .readiness-label { width: 100px; font-size: 9px; }
  }
</style>
</head>
<body>

<canvas id="bg-canvas"></canvas>
<div id="corner-left">FDL — Global Design Education Study 2025</div>
<div id="corner-right">—</div>

<div id="stepper">
  <div class="stepper-inner" id="stepper-inner"></div>
</div>

<div id="app">

  <!-- ═══ SCREEN: LANGUAGE ═══ -->
  <div id="screen-lang" class="screen active">
    <div class="center-layout">
      <div class="fade-in" style="text-align:center; margin-bottom:80px;">
        <div style="font-family:'DM Mono',monospace;font-size:11px;letter-spacing:0.3em;color:#E8FF00;text-transform:uppercase;margin-bottom:24px;">Foundation Design Lab</div>
        <div style="font-size:clamp(52px,8vw,100px);font-weight:300;line-height:0.9;letter-spacing:-0.02em;color:#F0EDE8;margin-bottom:20px;">
          Select<br /><em style="font-style:italic;">Language</em>
        </div>
        <div style="font-family:'DM Mono',monospace;font-size:12px;color:rgba(240,237,232,0.4);letter-spacing:0.1em;margin-top:20px;">Select to begin your foundation journey</div>
      </div>
      <div style="display:flex;flex-direction:column;gap:16px;width:100%;max-width:480px;">
        <button class="lang-card fade-in d1" onclick="selectLang('en')">
          <div>
            <div style="font-family:'DM Mono',monospace;font-size:10px;color:rgba(232,255,0,0.6);letter-spacing:0.2em;margin-bottom:6px;">01</div>
            <div style="font-size:32px;font-weight:300;letter-spacing:-0.01em;">English</div>
            <div style="font-family:'DM Mono',monospace;font-size:11px;color:rgba(240,237,232,0.35);margin-top:4px;">Foundation Design Lab</div>
          </div>
          <div class="lang-arrow">→</div>
        </button>
        <button class="lang-card fade-in d2" onclick="selectLang('hi')">
          <div>
            <div style="font-family:'DM Mono',monospace;font-size:10px;color:rgba(232,255,0,0.6);letter-spacing:0.2em;margin-bottom:6px;">02</div>
            <div style="font-size:32px;font-weight:300;letter-spacing:-0.01em;">हिन्दी</div>
            <div style="font-family:'DM Mono',monospace;font-size:11px;color:rgba(240,237,232,0.35);margin-top:4px;">फाउंडेशन डिज़ाइन लैब</div>
          </div>
          <div class="lang-arrow">→</div>
        </button>
        <button class="lang-card fade-in d3" onclick="selectLang('pt')">
          <div>
            <div style="font-family:'DM Mono',monospace;font-size:10px;color:rgba(232,255,0,0.6);letter-spacing:0.2em;margin-bottom:6px;">03</div>
            <div style="font-size:32px;font-weight:300;letter-spacing:-0.01em;">Português</div>
            <div style="font-family:'DM Mono',monospace;font-size:11px;color:rgba(240,237,232,0.35);margin-top:4px;">Foundation Design Lab</div>
          </div>
          <div class="lang-arrow">→</div>
        </button>
      </div>
    </div>
  </div>

  <!-- ═══ SCREEN: WELCOME ═══ -->
  <div id="screen-welcome" class="screen">
    <div class="center-layout" style="position:relative;">
      <div style="max-width:700px;text-align:center;">
        <div class="fade-in" style="font-family:'DM Mono',monospace;font-size:11px;letter-spacing:0.3em;color:#E8FF00;text-transform:uppercase;margin-bottom:32px;">◆ Research Platform ◆</div>
        <div class="fade-in d1" id="welcome-title" style="font-size:clamp(48px,7vw,90px);font-weight:300;line-height:0.92;letter-spacing:-0.02em;margin-bottom:32px;"></div>
        <p class="fade-in d2" id="welcome-sub" style="font-family:'DM Mono',monospace;font-size:13px;line-height:1.7;color:rgba(240,237,232,0.55);max-width:500px;margin:0 auto 48px;letter-spacing:0.04em;"></p>
        <div class="fade-in d3" style="display:inline-flex;align-items:center;gap:8px;border:1px solid rgba(232,255,0,0.25);padding:10px 20px;margin-bottom:40px;">
          <div class="pulse-dot" style="width:6px;height:6px;background:#E8FF00;border-radius:50%;"></div>
          <span id="welcome-research-note" style="font-family:'DM Mono',monospace;font-size:11px;letter-spacing:0.15em;color:rgba(232,255,0,0.7);text-transform:uppercase;"></span>
        </div>
        <div class="fade-in d4" style="display:flex;gap:16px;justify-content:center;flex-wrap:wrap;">
          <button class="btn-primary" onclick="goToProfile()" id="btn-begin"></button>
          <button class="btn-ghost" onclick="goToScreen('lang')" id="btn-back-welcome"></button>
        </div>
      </div>
      <div style="position:absolute;bottom:40px;left:50%;transform:translateX(-50%);display:flex;gap:40px;font-family:'DM Mono',monospace;font-size:10px;color:rgba(240,237,232,0.2);letter-spacing:0.15em;text-transform:uppercase;white-space:nowrap;">
        <span>Product</span><span>Fashion</span><span>Communication</span><span>Film</span><span>Gaming</span><span>Business</span>
      </div>
    </div>
  </div>

  <!-- ═══ SCREEN: PROFILE ═══ -->
  <div id="screen-profile" class="screen">
    <div class="content-layout">
      <div class="max-w-680">
        <div class="fade-in" style="margin-bottom:48px;">
          <div style="font-family:'DM Mono',monospace;font-size:11px;letter-spacing:0.2em;color:#E8FF00;text-transform:uppercase;margin-bottom:12px;" id="profile-step-label"></div>
          <div style="font-size:clamp(32px,5vw,60px);font-weight:300;line-height:1;letter-spacing:-0.02em;">Who are<br/><em>you?</em></div>
        </div>
        <div style="display:flex;flex-direction:column;gap:20px;">
          <div class="fade-in d1">
            <label class="field-label" id="label-name"></label>
            <input class="input-field" id="input-name" oninput="state.profile.name=this.value" />
          </div>
          <div class="fade-in d2">
            <label class="field-label" id="label-track"></label>
            <div class="grid-tracks" id="track-grid"></div>
          </div>
          <div class="grid-2 fade-in d3">
            <div>
              <label class="field-label" id="label-institution"></label>
              <input class="input-field" id="input-institution" oninput="state.profile.institution=this.value" />
            </div>
            <div>
              <label class="field-label" id="label-country"></label>
              <input class="input-field" id="input-country" placeholder="e.g. India / Brazil / UK" oninput="state.profile.country=this.value" />
            </div>
          </div>
          <div class="fade-in d4" style="display:flex;gap:12px;margin-top:16px;">
            <button class="btn-primary" id="btn-profile-continue" onclick="goToJourney()"></button>
            <button class="btn-ghost" onclick="goToScreen('welcome')" id="btn-profile-back"></button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ═══ SCREEN: JOURNEY ═══ -->
  <div id="screen-journey" class="screen">
    <div class="content-layout">
      <div class="max-w-900">
        <div class="fade-in" style="margin-bottom:48px;">
          <div style="font-family:'DM Mono',monospace;font-size:11px;letter-spacing:0.2em;color:#E8FF00;text-transform:uppercase;margin-bottom:12px;" id="journey-step-label"></div>
          <div style="font-size:clamp(32px,5vw,56px);font-weight:300;line-height:1;letter-spacing:-0.02em;margin-bottom:12px;" id="journey-title"></div>
          <p style="font-family:'DM Mono',monospace;font-size:12px;color:rgba(240,237,232,0.4);letter-spacing:0.06em;" id="journey-sub"></p>
        </div>
        <div class="grid-discs" id="disc-grid"></div>
        <div style="display:flex;gap:12px;margin-top:40px;" class="fade-in">
          <button class="btn-primary" onclick="goToAssess()" id="btn-journey-continue"></button>
          <button class="btn-ghost" onclick="goToScreen('profile')" id="btn-journey-back"></button>
        </div>
      </div>
    </div>
  </div>

  <!-- ═══ SCREEN: ASSESSMENT ═══ -->
  <div id="screen-assess" class="screen">
    <div class="content-layout">
      <div class="max-w-720">
        <div class="fade-in" style="margin-bottom:48px;">
          <div style="font-family:'DM Mono',monospace;font-size:11px;letter-spacing:0.2em;color:#E8FF00;text-transform:uppercase;margin-bottom:12px;" id="assess-step-label"></div>
          <div style="font-size:clamp(32px,5vw,54px);font-weight:300;line-height:1;letter-spacing:-0.02em;margin-bottom:12px;" id="assess-title"></div>
          <p style="font-family:'DM Mono',monospace;font-size:12px;color:rgba(240,237,232,0.4);letter-spacing:0.06em;" id="assess-sub"></p>
        </div>
        <div id="questions-container"></div>
        <div style="display:flex;gap:12px;margin-top:16px;">
          <button class="btn-primary" id="btn-assess-submit" onclick="goToInsights()"></button>
          <button class="btn-ghost" onclick="goToScreen('journey')" id="btn-assess-back"></button>
        </div>
        <div id="assess-count" style="font-family:'DM Mono',monospace;font-size:10px;color:rgba(240,237,232,0.25);margin-top:12px;"></div>
      </div>
    </div>
  </div>

  <!-- ═══ SCREEN: INSIGHTS ═══ -->
  <div id="screen-insights" class="screen">
    <div class="content-layout" style="padding-bottom:80px;">
      <div class="max-w-860">
        <div class="fade-in" style="margin-bottom:16px;">
          <div style="font-family:'DM Mono',monospace;font-size:11px;letter-spacing:0.2em;color:#E8FF00;text-transform:uppercase;margin-bottom:12px;" id="insights-step-label"></div>
          <div style="font-size:clamp(14px,2vw,18px);font-family:'DM Mono',monospace;color:rgba(240,237,232,0.4);margin-bottom:4px;" id="insights-name"></div>
          <div style="font-size:clamp(32px,5vw,58px);font-weight:300;line-height:1;letter-spacing:-0.02em;" id="insights-title"></div>
        </div>
        <div id="insights-content"></div>
      </div>
    </div>
  </div>

</div><!-- end #app -->

<script>
// ═══════════════════════════════════════════════════════════════
// DATA
// ═══════════════════════════════════════════════════════════════
const T = {
  en: {
    stepProfile:"Your Profile", stepJourney:"Learning Journey", stepAssess:"Self-Assessment", stepInsights:"Your Insights",
    welcome:"Foundation\nDesign Lab",
    welcomeSub:"A research-driven self-discovery platform for design students entering higher education",
    begin:"Begin Your Journey", back:"Back",
    researchNote:"Your responses contribute to global design education research",
    nameLabel:"Your Full Name", namePlaceholder:"Enter your name",
    trackLabel:"Your Selected Design Track",
    tracks:{ product:"Product Design", fashion:"Fashion Design", communication:"Communication Design", film:"Film & Motion", gaming:"Game Design", business:"Business & Design Management" },
    institutionLabel:"Your Institution (optional)", institutionPlaceholder:"University / College name",
    countryLabel:"Country", continue:"Continue",
    journeyTitle:"Your Foundation Learning Map",
    journeySub:"Explore the disciplines that form the backbone of your creative education",
    disciplines:{
      drawing:{ title:"Drawing & Visual Thinking", desc:"The hand as an instrument of the mind — observation, ideation, mark-making" },
      color:{ title:"Colour Theory & Perception", desc:"Hue, value, saturation — how colour communicates meaning across cultures" },
      form:{ title:"Form, Space & Materiality", desc:"3D thinking, material properties, volume and spatial relationships" },
      typography:{ title:"Typography & Communication", desc:"The architecture of text — letterforms as designed objects and systems" },
      research:{ title:"Design Research Methods", desc:"Ethnography, observation, synthesis — turning insight into design strategy" },
      history:{ title:"Design History & Criticism", desc:"From Bauhaus to Now — context, movements, critical perspectives" },
      digital:{ title:"Digital Tools & Fabrication", desc:"Software, prototyping, rapid iteration between physical and digital" },
      business_found:{ title:"Business & Design Strategy", desc:"Value creation, brand thinking, design as a driver of enterprise" },
    },
    rateYourself:"How familiar are you with this area entering foundation?",
    levels:["Never explored","Heard of it","Some exposure","Comfortable","Confident"],
    assessTitle:"Self-Discovery Assessment",
    assessSub:"There are no right answers — this maps your learning mindset",
    questions:[
      { id:"q1", q:"When you see an object for the first time, you are most drawn to...", options:["Its form and silhouette","The materials and textures","How it communicates a message","How it was made or could be improved","Its cultural or historical context"] },
      { id:"q2", q:"Your strongest instinct in a design brief is to...", options:["Sketch ideas immediately","Research and gather references first","Talk to people who will use it","Identify the business or strategic need","Challenge the brief itself"] },
      { id:"q3", q:"Which environment makes you most creative?", options:["A well-lit studio with physical materials","A digital workspace with multiple screens","Outdoors, observing real environments","A library or archive surrounded by references","Collaborative chaotic spaces with others"] },
      { id:"q4", q:"Which word best describes your relationship with failure?", options:["It paralyses me briefly but I recover","It motivates me to iterate faster","I reframe it as unexpected data","I avoid it by planning thoroughly","It rarely bothers me — I embrace ambiguity"] },
      { id:"q5", q:"In a group design project you naturally become...", options:["The visual maker — drawing and rendering","The researcher — building knowledge base","The connector — bridging people and ideas","The critic — questioning assumptions","The organiser — keeping process on track"] },
      { id:"q6", q:"Which foundation discipline feels most unfamiliar to you?", options:["Drawing and mark-making","Colour and composition","3D form and materiality","Typography and layout","Business thinking and strategy"] },
      { id:"q7", q:"Your approach to learning a new design skill is...", options:["Copy masters first, then diverge","Experiment randomly and discover","Find the underlying system or logic","Watch others and absorb by observation","Apply it immediately to a real problem"] },
      { id:"q8", q:"If your design practice were a material it would be...", options:["Clay — intuitive and tactile","Code — structured and systematic","Fabric — sensitive to context and body","Glass — refined, fragile, precise","Steel — bold, industrial, enduring"] },
    ],
    submitAssessment:"See My Insights",
    insightsTitle:"Your Design Foundation Profile",
    insightsSub:"Based on your responses — a starting portrait of your creative identity",
    archetypes:{
      maker:{ title:"The Intuitive Maker", desc:"You think through your hands. Tactile, sensory, immediate — foundation will unlock your physical intelligence into structured creative power." },
      researcher:{ title:"The Analytical Researcher", desc:"You build knowledge before you build form. Foundation will sharpen your ability to translate deep insight into visual and material language." },
      systems:{ title:"The Systems Thinker", desc:"You see patterns, structures and underlying logic. Foundation will give you the vocabulary to communicate complex thinking with clarity and beauty." },
      storyteller:{ title:"The Visual Storyteller", desc:"You lead with meaning and narrative. Foundation will expand your toolkit from concept to craft — giving your stories powerful form." },
      strategist:{ title:"The Design Strategist", desc:"You connect design to impact and value. Foundation will give you the visual and material fluency to partner creativity with clear intent." },
    },
    strengthAreas:"Emerging Strengths", growthAreas:"Growth Territories",
    researchThankYou:"Thank you for contributing to global design education research",
    researchNote2:"Your anonymised responses help us understand foundation learning worldwide.",
    downloadProfile:"Download Profile", startOver:"Start New Journey",
    archetypeLabel:"Your Archetype", readinessLabel:"Foundation Readiness Map",
    noStrengths:"Rate disciplines to reveal strengths", noGrowth:"Rate disciplines to reveal growth areas",
    answered:"answered",
  },
  hi: {
    stepProfile:"आपका प्रोफ़ाइल", stepJourney:"सीखने की यात्रा", stepAssess:"स्व-मूल्यांकन", stepInsights:"आपकी अंतर्दृष्टि",
    welcome:"फाउंडेशन\nडिज़ाइन लैब",
    welcomeSub:"उच्च शिक्षा में प्रवेश करने वाले डिज़ाइन छात्रों के लिए एक शोध-आधारित आत्म-खोज मंच",
    begin:"अपनी यात्रा शुरू करें", back:"वापस",
    researchNote:"आपके उत्तर वैश्विक डिज़ाइन शिक्षा अनुसंधान में योगदान देते हैं",
    nameLabel:"आपका पूरा नाम", namePlaceholder:"अपना नाम दर्ज करें",
    trackLabel:"आपका चुना हुआ डिज़ाइन ट्रैक",
    tracks:{ product:"प्रोडक्ट डिज़ाइन", fashion:"फ़ैशन डिज़ाइन", communication:"कम्युनिकेशन डिज़ाइन", film:"फ़िल्म और मोशन", gaming:"गेम डिज़ाइन", business:"बिज़नेस और डिज़ाइन मैनेजमेंट" },
    institutionLabel:"आपका संस्थान (वैकल्पिक)", institutionPlaceholder:"विश्वविद्यालय / कॉलेज का नाम",
    countryLabel:"देश", continue:"जारी रखें",
    journeyTitle:"आपका फाउंडेशन लर्निंग मैप",
    journeySub:"उन विषयों का अन्वेषण करें जो आपकी रचनात्मक शिक्षा की रीढ़ बनाते हैं",
    disciplines:{
      drawing:{ title:"ड्राइंग और विज़ुअल थिंकिंग", desc:"मन का साधन — अवलोकन, विचार, और रेखा-चित्रण" },
      color:{ title:"रंग सिद्धांत और धारणा", desc:"रंग — कैसे रंग संस्कृतियों में अर्थ संचारित करता है" },
      form:{ title:"रूप, स्थान और सामग्री", desc:"3D सोच, सामग्री गुण, और स्थानिक संबंध" },
      typography:{ title:"टाइपोग्राफी और संचार", desc:"पाठ की वास्तुकला — अक्षर एक डिज़ाइन प्रणाली के रूप में" },
      research:{ title:"डिज़ाइन अनुसंधान विधियाँ", desc:"अवलोकन और संश्लेषण — अंतर्दृष्टि को रणनीति में बदलना" },
      history:{ title:"डिज़ाइन इतिहास और आलोचना", desc:"बौहॉस से अब तक — संदर्भ, आंदोलन, दृष्टिकोण" },
      digital:{ title:"डिजिटल टूल्स और फेब्रिकेशन", desc:"सॉफ़्टवेयर, प्रोटोटाइपिंग, भौतिक और डिजिटल के बीच पुनरावृत्ति" },
      business_found:{ title:"बिज़नेस और डिज़ाइन रणनीति", desc:"मूल्य निर्माण, ब्रांड सोच, उद्यम के चालक के रूप में डिज़ाइन" },
    },
    rateYourself:"फाउंडेशन में प्रवेश करते समय इस क्षेत्र से आप कितने परिचित हैं?",
    levels:["कभी नहीं देखा","सुना है","कुछ परिचय","सहज","आत्मविश्वासी"],
    assessTitle:"आत्म-खोज मूल्यांकन",
    assessSub:"कोई सही उत्तर नहीं है — यह आपकी सीखने की मानसिकता का मानचित्र बनाता है",
    questions:[
      { id:"q1", q:"जब आप किसी वस्तु को पहली बार देखते हैं, तो आप सबसे अधिक किसकी ओर आकर्षित होते हैं?", options:["इसका रूप और सिल्हूट","सामग्री और बनावट","यह संदेश कैसे संचारित करती है","इसे कैसे बनाया गया या सुधारा जा सकता है","इसका सांस्कृतिक या ऐतिहासिक संदर्भ"] },
      { id:"q2", q:"डिज़ाइन ब्रीफ में आपकी सबसे मजबूत प्रवृत्ति क्या है?", options:["तुरंत स्केच करना","पहले शोध करना","उपयोगकर्ताओं से बात करना","व्यावसायिक आवश्यकता की पहचान करना","ब्रीफ को ही चुनौती देना"] },
      { id:"q3", q:"कौन सा वातावरण आपको सबसे रचनात्मक बनाता है?", options:["भौतिक सामग्री के साथ स्टूडियो","कई स्क्रीन के साथ डिजिटल कार्यक्षेत्र","बाहर, वास्तविक वातावरण का अवलोकन","संदर्भों से भरी लाइब्रेरी","दूसरों के साथ सहयोगी स्थान"] },
      { id:"q4", q:"असफलता के साथ आपका संबंध कैसा है?", options:["यह मुझे थोड़ा रोकती है पर मैं ठीक हो जाता हूं","यह मुझे तेज़ी से आगे बढ़ने के लिए प्रेरित करती है","मैं इसे अप्रत्याशित डेटा मानता हूं","मैं इसे योजना से टालता हूं","यह मुझे शायद ही परेशान करती है"] },
      { id:"q5", q:"समूह डिज़ाइन प्रोजेक्ट में आप स्वाभाविक रूप से क्या बनते हैं?", options:["दृश्य निर्माता","शोधकर्ता","संयोजक","आलोचक","आयोजक"] },
      { id:"q6", q:"कौन सा फाउंडेशन अनुशासन आपको सबसे अपरिचित लगता है?", options:["ड्राइंग और मार्क-मेकिंग","रंग और संरचना","3D रूप और सामग्री","टाइपोग्राफी और लेआउट","व्यावसायिक सोच और रणनीति"] },
      { id:"q7", q:"एक नया डिज़ाइन कौशल सीखने का आपका तरीका क्या है?", options:["पहले उस्तादों की नकल करें","यादृच्छिक रूप से प्रयोग करें","अंतर्निहित प्रणाली खोजें","दूसरों को देखकर अवशोषित करें","इसे तुरंत किसी असली समस्या पर लागू करें"] },
      { id:"q8", q:"अगर आपका डिज़ाइन अभ्यास एक सामग्री होती तो वह होती...", options:["मिट्टी — सहज और स्पर्शीय","कोड — संरचित और व्यवस्थित","कपड़ा — संदर्भ और शरीर के प्रति संवेदनशील","काँच — परिष्कृत, नाजुक, सटीक","इस्पात — साहसी, औद्योगिक, स्थायी"] },
    ],
    submitAssessment:"मेरी अंतर्दृष्टि देखें",
    insightsTitle:"आपका डिज़ाइन फाउंडेशन प्रोफाइल",
    insightsSub:"आपके उत्तरों के आधार पर — आपकी रचनात्मक पहचान का एक प्रारंभिक चित्र",
    archetypes:{
      maker:{ title:"सहज निर्माता", desc:"आप अपने हाथों से सोचते हैं। फाउंडेशन आपकी भौतिक बुद्धिमत्ता को संरचित रचनात्मक शक्ति में परिवर्तित करेगी।" },
      researcher:{ title:"विश्लेषणात्मक शोधकर्ता", desc:"आप रूप बनाने से पहले ज्ञान बनाते हैं। फाउंडेशन आपको गहरी अंतर्दृष्टि को दृश्य भाषा में अनुवाद करने में मदद करेगी।" },
      systems:{ title:"सिस्टम थिंकर", desc:"आप पैटर्न और संरचनाएं देखते हैं। फाउंडेशन आपको जटिल सोच को स्पष्टता और सौंदर्य के साथ संप्रेषित करने की शब्दावली देगी।" },
      storyteller:{ title:"दृश्य कथाकार", desc:"आप अर्थ और कथा से नेतृत्व करते हैं। फाउंडेशन आपकी कहानियों को शक्तिशाली रूप देगी।" },
      strategist:{ title:"डिज़ाइन रणनीतिकार", desc:"आप डिज़ाइन को प्रभाव और मूल्य से जोड़ते हैं। फाउंडेशन आपको रचनात्मकता के साथ स्पष्ट इरादे जोड़ने की क्षमता देगी।" },
    },
    strengthAreas:"उभरती शक्तियाँ", growthAreas:"विकास के क्षेत्र",
    researchThankYou:"वैश्विक डिज़ाइन शिक्षा अनुसंधान में योगदान के लिए धन्यवाद",
    researchNote2:"आपके गुमनाम उत्तर दुनिया भर में फाउंडेशन शिक्षा को समझने में मदद करते हैं।",
    downloadProfile:"प्रोफाइल डाउनलोड करें", startOver:"नई यात्रा शुरू करें",
    archetypeLabel:"आपका आर्केटाइप", readinessLabel:"फाउंडेशन तैयारी मानचित्र",
    noStrengths:"ताकत उजागर करने के लिए विषयों को रेट करें", noGrowth:"विकास क्षेत्र उजागर करने के लिए विषयों को रेट करें",
    answered:"उत्तर दिए",
  },
  pt: {
    stepProfile:"O seu Perfil", stepJourney:"Jornada de Aprendizagem", stepAssess:"Autoavaliação", stepInsights:"Os seus Insights",
    welcome:"Foundation\nDesign Lab",
    welcomeSub:"Uma plataforma de autodescoberta orientada pela pesquisa para estudantes de design a ingressar no ensino superior",
    begin:"Iniciar a Jornada", back:"Voltar",
    researchNote:"As suas respostas contribuem para a pesquisa global em educação de design",
    nameLabel:"Nome Completo", namePlaceholder:"Introduza o seu nome",
    trackLabel:"Área de Design Selecionada",
    tracks:{ product:"Design de Produto", fashion:"Design de Moda", communication:"Design de Comunicação", film:"Cinema e Motion", gaming:"Design de Jogos", business:"Gestão de Negócios e Design" },
    institutionLabel:"Instituição (opcional)", institutionPlaceholder:"Nome da Universidade / Faculdade",
    countryLabel:"País", continue:"Continuar",
    journeyTitle:"O seu Mapa de Aprendizagem Fundacional",
    journeySub:"Explore as disciplinas que formam a espinha dorsal da sua educação criativa",
    disciplines:{
      drawing:{ title:"Desenho e Pensamento Visual", desc:"A mão como instrumento da mente — observação, ideação, traçado" },
      color:{ title:"Teoria e Perceção da Cor", desc:"Matiz, valor, saturação — como a cor comunica significado entre culturas" },
      form:{ title:"Forma, Espaço e Materialidade", desc:"Pensamento 3D, propriedades dos materiais, volume e relações espaciais" },
      typography:{ title:"Tipografia e Comunicação", desc:"A arquitetura do texto — formas de letras como objetos e sistemas de design" },
      research:{ title:"Métodos de Pesquisa em Design", desc:"Etnografia, observação, síntese — transformar insight em estratégia de design" },
      history:{ title:"História e Crítica do Design", desc:"Da Bauhaus ao presente — contexto, movimentos, perspetivas críticas" },
      digital:{ title:"Ferramentas Digitais e Fabricação", desc:"Software, prototipagem, iteração rápida entre o físico e o digital" },
      business_found:{ title:"Estratégia de Negócios e Design", desc:"Criação de valor, branding, design como motor da empresa" },
    },
    rateYourself:"Qual a sua familiaridade com esta área ao entrar nos fundamentos?",
    levels:["Nunca explorei","Já ouvi falar","Alguma exposição","Confortável","Confiante"],
    assessTitle:"Avaliação de Autodescoberta",
    assessSub:"Não há respostas certas — isto mapeia a sua mentalidade de aprendizagem",
    questions:[
      { id:"q1", q:"Quando vê um objeto pela primeira vez, o que mais o atrai?", options:["A sua forma e silhueta","Os materiais e texturas","Como comunica uma mensagem","Como foi feito ou poderia ser melhorado","O seu contexto cultural ou histórico"] },
      { id:"q2", q:"O seu instinto mais forte num briefing de design é...", options:["Fazer esboços imediatamente","Pesquisar e reunir referências primeiro","Falar com as pessoas que vão utilizá-lo","Identificar a necessidade estratégica ou de negócio","Questionar o próprio briefing"] },
      { id:"q3", q:"Que ambiente o torna mais criativo?", options:["Um estúdio com materiais físicos","Um espaço digital com múltiplos ecrãs","Ao ar livre, observando ambientes reais","Uma biblioteca rodeado de referências","Espaços colaborativos e caóticos com outros"] },
      { id:"q4", q:"Qual a sua relação com o fracasso?", options:["Paralisa-me brevemente mas recupero","Motiva-me a iterar mais rapidamente","Reencadro-o como dados inesperados","Evito-o através de um planeamento cuidadoso","Raramente me perturba — abraço a ambiguidade"] },
      { id:"q5", q:"Num projeto de design em grupo torna-se naturalmente...", options:["O criador visual","O investigador","O conector de ideias e pessoas","O crítico — questionando pressupostos","O organizador do processo"] },
      { id:"q6", q:"Qual a disciplina fundacional que lhe parece menos familiar?", options:["Desenho e marcação","Cor e composição","Forma 3D e materialidade","Tipografia e layout","Pensamento de negócios e estratégia"] },
      { id:"q7", q:"A sua abordagem para aprender uma nova competência de design é...", options:["Copiar mestres primeiro, depois divergir","Experimentar aleatoriamente e descobrir","Encontrar o sistema ou a lógica subjacente","Observar outros e absorver pela observação","Aplicá-la imediatamente a um problema real"] },
      { id:"q8", q:"Se a sua prática de design fosse um material seria...", options:["Argila — intuitiva e tátil","Código — estruturado e sistemático","Tecido — sensível ao contexto e ao corpo","Vidro — refinado, frágil, preciso","Aço — ousado, industrial, duradouro"] },
    ],
    submitAssessment:"Ver os meus Insights",
    insightsTitle:"O seu Perfil de Design Fundacional",
    insightsSub:"Com base nas suas respostas — um retrato inicial da sua identidade criativa",
    archetypes:{
      maker:{ title:"O Criador Intuitivo", desc:"Pensa com as mãos. Tátil, sensorial, imediato — os fundamentos transformarão a sua inteligência física em poder criativo estruturado." },
      researcher:{ title:"O Investigador Analítico", desc:"Constrói conhecimento antes de construir forma. Os fundamentos vão aperfeiçoar a sua capacidade de traduzir insights profundos em linguagem visual." },
      systems:{ title:"O Pensador Sistémico", desc:"Vê padrões e estruturas. Os fundamentos darão vocabulário para comunicar pensamento complexo com clareza e beleza." },
      storyteller:{ title:"O Contador de Histórias Visual", desc:"Lidera com significado e narrativa. Os fundamentos expandirão o seu repertório do conceito ao ofício." },
      strategist:{ title:"O Estrategista de Design", desc:"Liga o design ao impacto e ao valor. Os fundamentos darão a fluência visual e material para unir criatividade a intenção clara." },
    },
    strengthAreas:"Pontos Fortes Emergentes", growthAreas:"Territórios de Crescimento",
    researchThankYou:"Obrigado por contribuir para a pesquisa global em educação de design",
    researchNote2:"As suas respostas anonimizadas ajudam-nos a compreender a aprendizagem fundacional em todo o mundo.",
    downloadProfile:"Descarregar Perfil", startOver:"Iniciar Nova Jornada",
    archetypeLabel:"O seu Arquétipo", readinessLabel:"Mapa de Prontidão Fundacional",
    noStrengths:"Avalie disciplinas para revelar pontos fortes", noGrowth:"Avalie disciplinas para revelar áreas de crescimento",
    answered:"respondidas",
  }
};

// ═══════════════════════════════════════════════════════════════
// STATE
// ═══════════════════════════════════════════════════════════════
const state = {
  lang: null,
  currentScreen: 'lang',
  profile: { name:'', track:'', institution:'', country:'' },
  discRatings: {},
  assessAnswers: {},
  archetype: null
};

const ARCHETYPE_MAP = {
  q1:["maker","maker","storyteller","researcher","researcher"],
  q2:["maker","researcher","storyteller","strategist","systems"],
  q3:["maker","systems","storyteller","researcher","storyteller"],
  q4:["storyteller","maker","systems","strategist","researcher"],
  q5:["maker","researcher","storyteller","systems","strategist"],
  q6:["maker","systems","maker","storyteller","strategist"],
  q7:["researcher","maker","systems","storyteller","strategist"],
  q8:["maker","systems","storyteller","systems","strategist"],
};

function computeArchetype() {
  const scores = {maker:0,researcher:0,systems:0,storyteller:0,strategist:0};
  Object.entries(state.assessAnswers).forEach(([q,idx]) => {
    if (ARCHETYPE_MAP[q] && ARCHETYPE_MAP[q][idx]) scores[ARCHETYPE_MAP[q][idx]]++;
  });
  return Object.entries(scores).sort((a,b)=>b[1]-a[1])[0][0];
}

// ═══════════════════════════════════════════════════════════════
// BACKGROUND CANVAS
// ═══════════════════════════════════════════════════════════════
(function initCanvas() {
  const canvas = document.getElementById('bg-canvas');
  const ctx = canvas.getContext('2d');
  let frame = 0;
  function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
  resize();
  window.addEventListener('resize', resize);
  function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.strokeStyle = 'rgba(232,255,0,0.04)';
    ctx.lineWidth = 1;
    const g = 60;
    for(let x=0;x<canvas.width;x+=g){ctx.beginPath();ctx.moveTo(x,0);ctx.lineTo(x,canvas.height);ctx.stroke();}
    for(let y=0;y<canvas.height;y+=g){ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(canvas.width,y);ctx.stroke();}
    const p = (frame%300)/300;
    const x1 = p*canvas.width*2-canvas.width;
    ctx.strokeStyle = 'rgba(232,255,0,0.07)'; ctx.lineWidth = 1;
    ctx.beginPath();ctx.moveTo(x1,0);ctx.lineTo(x1+canvas.height,canvas.height);ctx.stroke();
    ctx.beginPath();ctx.moveTo(x1-80,0);ctx.lineTo(x1+canvas.height-80,canvas.height);ctx.stroke();
    frame++;
    requestAnimationFrame(draw);
  }
  draw();
})();

// ═══════════════════════════════════════════════════════════════
// NAVIGATION
// ═══════════════════════════════════════════════════════════════
function goToScreen(name) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById('screen-'+name).classList.add('active');
  state.currentScreen = name;
  window.scrollTo(0,0);
  updateStepper();
  document.getElementById('corner-right').textContent = state.lang ? state.lang.toUpperCase() : '—';
}

function selectLang(lang) {
  state.lang = lang;
  document.getElementById('corner-right').textContent = lang.toUpperCase();
  renderWelcome();
  goToScreen('welcome');
}

function goToProfile() { renderProfile(); goToScreen('profile'); }
function goToJourney() {
  if (!state.profile.name || !state.profile.track) return;
  renderJourney();
  goToScreen('journey');
}
function goToAssess() { renderAssess(); goToScreen('assess'); }
function goToInsights() {
  if (Object.keys(state.assessAnswers).length < 6) return;
  state.archetype = computeArchetype();
  renderInsights();
  goToScreen('insights');
}

// ═══════════════════════════════════════════════════════════════
// STEPPER
// ═══════════════════════════════════════════════════════════════
const STEP_ORDER = ['profile','journey','assess','insights'];
function updateStepper() {
  const stepper = document.getElementById('stepper');
  const idx = STEP_ORDER.indexOf(state.currentScreen);
  if (idx < 0) { stepper.style.display = 'none'; return; }
  stepper.style.display = 'block';
  const t = T[state.lang] || T.en;
  const labels = [t.stepProfile, t.stepJourney, t.stepAssess, t.stepInsights];
  const inner = document.getElementById('stepper-inner');
  inner.innerHTML = '';
  labels.forEach((lbl, i) => {
    const item = document.createElement('div');
    item.className = 'step-item';
    item.innerHTML = `<div class="step-num ${i<idx?'done':i===idx?'active':''}">${i<idx?'✓':i+1}</div><span class="step-label ${i<=idx?i===idx?'active':'done':''}">${lbl}</span>`;
    inner.appendChild(item);
    if (i < labels.length-1) {
      const line = document.createElement('div');
      line.className = 'step-line';
      line.innerHTML = `<div class="step-line-fill" style="width:${i<idx?'100%':'0%'}"></div>`;
      inner.appendChild(line);
    }
  });
}

// ═══════════════════════════════════════════════════════════════
// RENDER WELCOME
// ═══════════════════════════════════════════════════════════════
function renderWelcome() {
  const t = T[state.lang];
  const titleLines = t.welcome.split('\n');
  document.getElementById('welcome-title').innerHTML = titleLines.map((l,i)=>`<span style="display:block;font-style:${i===1?'italic':'normal'}">${l}</span>`).join('');
  document.getElementById('welcome-sub').textContent = t.welcomeSub;
  document.getElementById('welcome-research-note').textContent = t.researchNote;
  document.getElementById('btn-begin').textContent = t.begin;
  document.getElementById('btn-back-welcome').textContent = t.back;
}

// ═══════════════════════════════════════════════════════════════
// RENDER PROFILE
// ═══════════════════════════════════════════════════════════════
function renderProfile() {
  const t = T[state.lang];
  document.getElementById('profile-step-label').textContent = `01 — ${t.stepProfile}`;
  document.getElementById('label-name').textContent = t.nameLabel;
  document.getElementById('input-name').placeholder = t.namePlaceholder;
  document.getElementById('input-name').value = state.profile.name;
  document.getElementById('label-track').textContent = t.trackLabel;
  document.getElementById('label-institution').textContent = t.institutionLabel;
  document.getElementById('input-institution').placeholder = t.institutionPlaceholder;
  document.getElementById('input-institution').value = state.profile.institution;
  document.getElementById('label-country').textContent = t.countryLabel;
  document.getElementById('input-country').value = state.profile.country;
  document.getElementById('btn-profile-continue').textContent = t.continue;
  document.getElementById('btn-profile-back').textContent = t.back;

  const trackKeys = Object.keys(t.tracks);
  const grid = document.getElementById('track-grid');
  grid.innerHTML = '';
  trackKeys.forEach((k, i) => {
    const btn = document.createElement('button');
    btn.className = 'track-card' + (state.profile.track===k?' selected':'');
    btn.innerHTML = `<div class="track-num">${String(i+1).padStart(2,'0')}</div><div class="track-name">${t.tracks[k]}</div><div class="track-dot"></div>`;
    btn.onclick = () => {
      state.profile.track = k;
      document.querySelectorAll('.track-card').forEach(c=>c.classList.remove('selected'));
      btn.classList.add('selected');
    };
    grid.appendChild(btn);
  });
}

// ═══════════════════════════════════════════════════════════════
// RENDER JOURNEY
// ═══════════════════════════════════════════════════════════════
function renderJourney() {
  const t = T[state.lang];
  document.getElementById('journey-step-label').textContent = `02 — ${t.stepJourney}`;
  document.getElementById('journey-title').textContent = t.journeyTitle;
  document.getElementById('journey-sub').textContent = t.journeySub;
  document.getElementById('btn-journey-continue').textContent = t.continue;
  document.getElementById('btn-journey-back').textContent = t.back;

  const grid = document.getElementById('disc-grid');
  grid.innerHTML = '';
  Object.entries(t.disciplines).forEach(([key, d], i) => {
    const card = document.createElement('div');
    card.className = 'disc-card fade-in';
    card.style.animationDelay = `${Math.min(i,4)*0.1}s`;

    const ratingBtns = t.levels.map((lbl, li) => {
      return `<button class="rating-btn${state.discRatings[key]===li?' active':''}" data-key="${key}" data-li="${li}" title="${lbl}">${li+1}</button>`;
    }).join('');

    card.innerHTML = `
      <div class="disc-num">${String(i+1).padStart(2,'0')}</div>
      <div class="disc-title">${d.title}</div>
      <div class="disc-desc">${d.desc}</div>
      <div class="disc-rate-label">${t.rateYourself}</div>
      <div class="rating-row">${ratingBtns}</div>
      <div class="rating-label" id="rlabel-${key}">${state.discRatings[key]!==undefined?t.levels[state.discRatings[key]]:''}</div>
    `;
    grid.appendChild(card);
  });

  grid.addEventListener('click', e => {
    const btn = e.target.closest('.rating-btn');
    if (!btn) return;
    const key = btn.dataset.key;
    const li = parseInt(btn.dataset.li);
    state.discRatings[key] = li;
    const t2 = T[state.lang];
    document.querySelectorAll(`.rating-btn[data-key="${key}"]`).forEach((b,bi) => {
      b.classList.toggle('active', bi===li);
    });
    const lbl = document.getElementById(`rlabel-${key}`);
    if (lbl) lbl.textContent = t2.levels[li];
  });
}

// ═══════════════════════════════════════════════════════════════
// RENDER ASSESSMENT
// ═══════════════════════════════════════════════════════════════
function renderAssess() {
  const t = T[state.lang];
  document.getElementById('assess-step-label').textContent = `03 — ${t.stepAssess}`;
  document.getElementById('assess-title').textContent = t.assessTitle;
  document.getElementById('assess-sub').textContent = t.assessSub;
  document.getElementById('btn-assess-submit').textContent = t.submitAssessment;
  document.getElementById('btn-assess-submit').style.opacity = Object.keys(state.assessAnswers).length >= 6 ? '1' : '0.5';
  document.getElementById('btn-assess-back').textContent = t.back;
  updateAssessCount();

  const container = document.getElementById('questions-container');
  container.innerHTML = '';
  t.questions.forEach((q, qi) => {
    const block = document.createElement('div');
    block.className = 'q-block fade-in';
    block.style.animationDelay = `${Math.min(qi,4)*0.1}s`;
    const opts = q.options.map((opt, oi) => {
      const sel = state.assessAnswers[q.id]===oi;
      return `<button class="q-option${sel?' selected':''}" data-qid="${q.id}" data-oi="${oi}">
        <div class="q-opt-icon">${sel?'✓':String.fromCharCode(65+oi)}</div>${opt}
      </button>`;
    }).join('');
    block.innerHTML = `<div class="q-num">Q${String(qi+1).padStart(2,'0')}</div><div class="q-text">${q.q}</div>${opts}`;
    container.appendChild(block);
  });

  container.addEventListener('click', e => {
    const btn = e.target.closest('.q-option');
    if (!btn) return;
    const qid = btn.dataset.qid;
    const oi = parseInt(btn.dataset.oi);
    state.assessAnswers[qid] = oi;
    // update UI for this question
    document.querySelectorAll(`.q-option[data-qid="${qid}"]`).forEach((b, bi) => {
      b.classList.toggle('selected', bi===oi);
      const icon = b.querySelector('.q-opt-icon');
      icon.textContent = bi===oi ? '✓' : String.fromCharCode(65+bi);
    });
    updateAssessCount();
    const submitBtn = document.getElementById('btn-assess-submit');
    submitBtn.style.opacity = Object.keys(state.assessAnswers).length >= 6 ? '1' : '0.5';
  });
}

function updateAssessCount() {
  const t = T[state.lang];
  const el = document.getElementById('assess-count');
  if (el) el.textContent = `${Object.keys(state.assessAnswers).length} / ${t.questions.length} ${t.answered}`;
}

// ═══════════════════════════════════════════════════════════════
// RENDER INSIGHTS
// ═══════════════════════════════════════════════════════════════
function renderInsights() {
  const t = T[state.lang];
  const arch = state.archetype;
  document.getElementById('insights-step-label').textContent = `04 — ${t.stepInsights}`;
  document.getElementById('insights-name').textContent = state.profile.name;
  document.getElementById('insights-title').textContent = t.insightsTitle;

  const strengths = Object.entries(state.discRatings).filter(([,v])=>v>=3).map(([k])=>k);
  const growth = Object.entries(state.discRatings).filter(([,v])=>v<=1).map(([k])=>k);

  const trackInfo = [
    t.tracks[state.profile.track],
    state.profile.institution,
    state.profile.country
  ].filter(Boolean).join(' · ');

  const strengthHTML = strengths.length>0
    ? strengths.map(k=>`<span class="tag">${t.disciplines[k]?t.disciplines[k].title:k}</span>`).join('')
    : `<span style="font-family:'DM Mono',monospace;font-size:11px;color:rgba(240,237,232,0.3)">${t.noStrengths}</span>`;

  const growthHTML = growth.length>0
    ? growth.map(k=>`<span class="tag-growth">${t.disciplines[k]?t.disciplines[k].title:k}</span>`).join('')
    : `<span style="font-family:'DM Mono',monospace;font-size:11px;color:rgba(240,237,232,0.3)">${t.noGrowth}</span>`;

  const readinessBars = Object.entries(t.disciplines).map(([k,d],i) => {
    const v = state.discRatings[k]!==undefined ? state.discRatings[k] : -1;
    const pct = v>=0 ? ((v+1)/5)*100 : 0;
    const col = pct>60?'#E8FF00':pct>30?'rgba(232,255,0,0.5)':'rgba(232,255,0,0.2)';
    return `<div class="readiness-row">
      <div class="readiness-label">${d.title}</div>
      <div class="readiness-track"><div class="readiness-fill" style="width:${pct}%;background:${col};transition-delay:${i*0.08}s"></div></div>
      <div class="readiness-val">${v>=0?v+1:'-'}</div>
    </div>`;
  }).join('');

  const content = document.getElementById('insights-content');
  content.innerHTML = `
    <div class="archetype-card fade-in d1">
      <div class="archetype-badge">${t.archetypeLabel}</div>
      <div style="font-size:clamp(28px,4vw,48px);font-weight:300;letter-spacing:-0.02em;margin-bottom:16px;margin-top:12px;"><em>${t.archetypes[arch].title}</em></div>
      <p style="font-family:'DM Mono',monospace;font-size:13px;color:rgba(240,237,232,0.6);line-height:1.8;max-width:560px;letter-spacing:0.04em;">${t.archetypes[arch].desc}</p>
      <div style="margin-top:20px;font-family:'DM Mono',monospace;font-size:11px;color:rgba(232,255,0,0.5);text-transform:uppercase;letter-spacing:0.1em;">${trackInfo}</div>
    </div>
    <div class="grid-2 fade-in d2" style="margin-bottom:32px;">
      <div class="section-card">
        <div class="section-title-yellow">◆ ${t.strengthAreas}</div>
        ${strengthHTML}
      </div>
      <div class="section-card">
        <div class="section-title-red">◆ ${t.growthAreas}</div>
        ${growthHTML}
      </div>
    </div>
    <div class="section-card fade-in d3" style="margin-bottom:32px;">
      <div style="font-family:'DM Mono',monospace;font-size:10px;letter-spacing:0.2em;color:rgba(240,237,232,0.4);text-transform:uppercase;margin-bottom:20px;">${t.readinessLabel}</div>
      ${readinessBars}
    </div>
    <div class="fade-in d4" style="border-top:1px solid rgba(255,255,255,0.07);padding-top:32px;display:flex;align-items:flex-start;gap:20px;flex-wrap:wrap;">
      <div style="flex:1;min-width:240px;">
        <div style="font-family:'DM Mono',monospace;font-size:11px;color:rgba(232,255,0,0.6);letter-spacing:0.1em;text-transform:uppercase;margin-bottom:8px;">${t.researchThankYou}</div>
        <p style="font-family:'DM Mono',monospace;font-size:11px;color:rgba(240,237,232,0.3);line-height:1.7;letter-spacing:0.04em;">${t.researchNote2}</p>
      </div>
      <div style="display:flex;flex-direction:column;gap:10px;">
        <button class="btn-primary" onclick="downloadProfile()">${t.downloadProfile}</button>
        <button class="btn-ghost" onclick="resetAll()">${t.startOver}</button>
      </div>
    </div>
  `;

  // animate readiness bars after a tick
  setTimeout(() => {
    document.querySelectorAll('.readiness-fill').forEach(el => {
      el.style.width = el.style.width; // trigger reflow
    });
  }, 100);
}

// ═══════════════════════════════════════════════════════════════
// HELPERS
// ═══════════════════════════════════════════════════════════════
function downloadProfile() {
  const t = T[state.lang];
  const arch = state.archetype;
  const lines = [
    `FOUNDATION DESIGN LAB — ${t.globalStudy||'Global Design Education Study 2025'}`,
    ``,
    `Student: ${state.profile.name}`,
    `Track: ${t.tracks[state.profile.track]||state.profile.track}`,
    `Institution: ${state.profile.institution||'—'}`,
    `Country: ${state.profile.country||'—'}`,
    ``,
    `ARCHETYPE: ${t.archetypes[arch].title}`,
    `${t.archetypes[arch].desc}`,
    ``,
    `FOUNDATION READINESS:`,
    ...Object.entries(t.disciplines).map(([k,d]) => {
      const v = state.discRatings[k]!==undefined ? state.discRatings[k]+1 : 0;
      return `  ${d.title}: ${v}/5 ${v>0?t.levels[state.discRatings[k]]:'Not rated'}`;
    }),
    ``,
    `RESEARCH NOTE: ${t.researchNote2}`
  ];
  const blob = new Blob([lines.join('\n')], {type:'text/plain'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = `FDL_Profile_${state.profile.name.replace(/\s+/g,'_')||'Student'}.txt`;
  a.click();
}

function resetAll() {
  state.lang = null;
  state.currentScreen = 'lang';
  state.profile = {name:'',track:'',institution:'',country:''};
  state.discRatings = {};
  state.assessAnswers = {};
  state.archetype = null;
  document.getElementById('corner-right').textContent = '—';
  goToScreen('lang');
}
</script>
</body>
</html>
